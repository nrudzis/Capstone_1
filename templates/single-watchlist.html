{% extends 'base.html' %}
{% block title %}{{ watchlist.title }}{% endblock %}
{% block h1 %}{{ watchlist.title }}{% endblock %}
{% block content %}
<div id="watchlist-companies-section">
  <ul>
    {% for company in watchlist.companies %}
    <li>
      <a href="{{ url_for('show_company_info', ticker=company.ticker) }}">{{ company.name }} ({{ company.ticker }})</a>
      <form action="{{ url_for('remove_company', username=session['username'], watchlist_id=watchlist.id, company_id=company.id) }}" method="post" style="display: inline">
        <input type="submit" value="X">
      </form>
    </li>
    {% endfor %}
  </ul>
  <button id="watchlist-form-section-show">Change Title</button>
  <form action="{{ url_for('delete_watchlist', username=session['username'], watchlist_id=watchlist.id) }}" method="post" style="display: inline">
    <input type="submit" value="Delete Watchlist">
  </form>
</div>
<div id="watchlist-form-section" style="display: none">
  <h1>Change Watchlist Title</h1>
  <form action="{{ url_for('show_watchlist', username=session['username'], watchlist_id=watchlist.id) }}" method="post">
    {{ watchlist_form.hidden_tag()}}
    {% for field in watchlist_form if field.widget.input_type != 'hidden' %}
    <p>
      {{ field.label(class_="form-label") if field.widget.input_type != 'submit' }}
      {{ field(class_="form-control") }}
      {% for e in field.errors %}
      <small>{{ e }}</small>
      {% endfor %}
    </p>
    {% endfor %}
  </form>
  <button id="watchlist-form-section-hide">Cancel</button>
</div>
{% endblock %}
{% block scripts %}
<script src={{ url_for('static', filename='forms.js') }}></script>
{% endblock %}
